(this["webpackJsonpstarnavi-test-task"]=this["webpackJsonpstarnavi-test-task"]||[]).push([[0],{126:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(6),c=n.n(i),o=n(13),u=n(19),s=n.n(u),l=n(37),d=n(32),m=n(33),p=n(35),f=n(36),v=n(82),h=n(165),b=n(182),g=n(168),y=n(177),E=Object(h.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:136},selectEmpty:{marginTop:e.spacing(2)}}}));function k(){var e=E(),t=r.a.useState(""),n=Object(v.a)(t,2),a=n[0],i=n[1];return r.a.createElement("div",null,r.a.createElement(g.a,{className:e.formControl},r.a.createElement(b.a,{htmlFor:"age-native-simple"},"Game mode"),r.a.createElement(y.a,{native:!0,value:a,onChange:function(e){i(e.target.value)},name:"mode"},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"easyMode"},"Easy"),r.a.createElement("option",{value:"normalMode"},"Normal"),r.a.createElement("option",{value:"hardMode"},"Hard"))))}var O=n(183),_=n(173),R=n(75),w=n.n(R),j=Object(h.a)((function(e){return{margin:{margin:e.spacing(1),minWidth:136}}}));function N(){var e=j();return r.a.createElement("div",{className:e.margin},r.a.createElement(_.a,{container:!0,spacing:1,alignItems:"flex-end"},r.a.createElement(_.a,{item:!0},r.a.createElement(w.a,null)),r.a.createElement(_.a,{item:!0},r.a.createElement(O.a,{name:"name",label:"Enter your name"}))))}var C,B=n(174),A=n(57),S=n.n(A),G=n(179),W=n(178),x=n(76),M=n.n(x),T=n(53),D=n.n(T),P="GET_GAME_MODE",F="GET_GAME_DELAY",L="SET_USERNAME",I="FILL_ARRAY",U="MAKE_BLUE",H="MAKE_RED",J="MAKE_GREEN",K="ADD_USER_POINT",Y="ADD_PC_POINT",Q="USER_WINS",V="PC_WINS",q="END_GAME",z="RESET_STATE",X="GET_WINNERS",Z="UPDATE_LEADERBOARD",$=function(e){return{type:P,mode:e}},ee=function(e){return{type:Z,winnerObj:e}},te=function(){var e=new Date,t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],n=e.getDate(),a=e.getFullYear(),r=e.getHours(),i=e.getMinutes();return n=n<10?"0"+n:n,i=i<10?"0"+i:i,"".concat(r=r<10?"0"+r:r,":").concat(i," \u2014 ").concat(t," ").concat(n,", ").concat(a)},ne=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("https://starnavi-frontend-test-task.herokuapp.com/winners",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=Object(G.a)(B.a)({background:"linear-gradient(45deg, #474747 30%, #808080 90%)",color:"white",height:40,padding:"0 30px",marginTop:"8px"}),re=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showErr:!1},e.handleSubmit=function(){var t=Object(l.a)(s.a.mark((function t(n){var a,r,i,c,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.getGameSettings,i=a.setUserName,c=a.resetState,n.preventDefault(),c(),o=n.currentTarget.elements.mode.value,u=n.currentTarget.elements.name.value,""!==o&&""!==u){t.next=9;break}return e.setState({showErr:!0}),setTimeout((function(){e.setState({showErr:!1})}),2500),t.abrupt("return");case 9:r(o),i(u);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state.showErr,t=this.props.isGameOn;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:S.a.submitForm},r.a.createElement(k,null),r.a.createElement(N,null),r.a.createElement(ae,{type:"submit",variant:"contained"},t?"Play":"Play again")),r.a.createElement(W.a,{in:e,timeout:300,classNames:M.a,unmountOnExit:!0},r.a.createElement("div",{className:S.a.error},"Please choose the game mode and enter your name!")))}}]),n}(a.Component),ie=Object(o.b)((function(e){return{isGameOn:e.appReducer.mainReducer.isGameOn}}),{getGameSettings:function(e){return function(){var t=Object(l.a)(s.a.mark((function t(n){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.a.get("https://starnavi-frontend-test-task.herokuapp.com/game-settings");case 2:for(r in(a=t.sent).data)r===e&&(n($(a.data[r].field)),n((i=a.data[r].delay,{type:F,delay:i})));case 4:case"end":return t.stop()}var i}),t)})));return function(e){return t.apply(this,arguments)}}()},setUserName:function(e){return{type:L,name:e}},resetState:function(){return{type:z}}})(re),ce=n(58),oe=n.n(ce),ue="rgb(0, 102, 255)",se=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={width:""},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.fillArray,a=t.blocksNum,r=t.delay,i=t.isGameOn;this.setWidth(),n(a),void 0!==C&&clearInterval(C),C=setInterval((function(){e.makeRandomBlockBlue(),e.makeBlockRed()}),r),!i&&clearInterval(C)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.user,r=n.arr;e.user.points!==a.points&&this.readyToCheckWinner(r)}},{key:"makeRandomBlockBlue",value:function(){var e=this.props,t=e.arr,n=e.makeBlue,a=e.isGameOn,r=Math.round(Math.random()*(t.length-1));""===t[r].bgColor?n(r):a&&this.makeRandomBlockBlue(),this.areAllBlocksPainted(t)}},{key:"makeBlockRed",value:function(){var e=this,t=this.props,n=t.arr,a=t.delay,r=t.makeRed,i=t.addPcPoint;n.forEach((function(t){"rgb(0, 204, 0)"!==t.bgColor&&""!==t.bgColor&&setTimeout((function(){t.bgColor===ue&&(i(),r(t.id),e.readyToCheckWinner(n))}),a)}))}},{key:"makeBlockGreen",value:function(e){var t=this.props,n=t.makeGreen,a=t.addUserPoint;e.target.style.backgroundColor===ue&&(a(),n(Number(e.target.dataset.id)))}},{key:"areAllBlocksPainted",value:function(e){var t=this.props,n=t.endGame,a=t.isGameOn;e.every((function(e){return""!==e.bgColor}))&&a&&n()}},{key:"readyToCheckWinner",value:function(e){var t=this.props,n=t.checkWinner,a=t.blocksNum,r=t.user,i=t.pc;e.every((function(e){return"rgb(0, 204, 0)"===e.bgColor||"rgb(255, 26, 26)"===e.bgColor}))&&n(a,r,i)}},{key:"setWidth",value:function(){25===this.props.blocksNum?this.setState({width:"250px"}):100===this.props.blocksNum?this.setState({width:"500px"}):this.setState({width:"750px"})}},{key:"render",value:function(){var e=this.state.width,t=this.makeBlockGreen.bind(this);return r.a.createElement("div",{onClick:t,className:oe.a.fieldContainer,style:{width:e}},this.props.arr.map((function(e){var t=e.id,n=e.bgColor;return r.a.createElement("div",{style:{backgroundColor:n},className:oe.a.fieldBlock,key:t,"data-id":t})})))}}]),n}(a.Component),le=Object(o.b)((function(e){return{blocksNum:e.appReducer.mainReducer.fieldBlocksNum,arr:e.appReducer.blocksReducer,delay:e.appReducer.mainReducer.delay,user:e.appReducer.userReducer,pc:e.appReducer.pcReducer,isGameOn:e.appReducer.mainReducer.isGameOn}}),{fillArray:function(e){return function(t){for(var n=[],a=0;a<e;a+=1){var r={id:a,bgColor:""};n.push(r)}t({type:I,arr:n})}},makeBlue:function(e){return{type:U,id:e}},makeRed:function(e){return{type:H,id:e}},makeGreen:function(e){return{type:J,id:e}},addUserPoint:function(){return{type:K}},addPcPoint:function(){return{type:Y}},checkWinner:function(e,t,n){return function(a){var r=.5*e;if(t.points>r){var i={winner:t.name,date:te()};a({type:Q}),a(ee(i)),ne(i)}if(n.points>r){var c={winner:n.name,date:te()};a({type:V}),a(ee(c)),ne(c)}}},endGame:function(){return{type:q}}})(se),de=n(54),me=n.n(de),pe=n(77),fe=n.n(pe),ve=Object(o.b)((function(e){return{user:e.appReducer.userReducer,pc:e.appReducer.pcReducer}}))((function(e){var t=e.user,n=e.pc;return r.a.createElement("div",{className:fe.a.winnerContainer},t.isWinner?t.name:n.name," wins!")})),he=n(172),be=n(175),ge=n(181),ye=n(176),Ee=n(180),ke=n(55),Oe=n.n(ke),_e=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.getWinners()}},{key:"render",value:function(){var e=this.props.winners;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:Oe.a.winnersHdr},"Leader Board"),0===e.length?r.a.createElement("div",{className:Oe.a.noWinners},"Play a game to put your name on the Leader Board!"):r.a.createElement(he.a,{className:Oe.a.winnersList},e.map((function(e){var t=e.winner,n=e.date,a=e.id;return r.a.createElement(be.a,{key:a},r.a.createElement(ye.a,null,r.a.createElement(Ee.a,null,t[0].toUpperCase())),r.a.createElement(ge.a,{primary:t,secondary:n}))}))))}}]),n}(a.Component),Re=Object(o.b)((function(e){return{winners:e.leaderBoardReducer,update:e.appReducer.mainReducer.update}}),{getWinners:function(){return function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("https://starnavi-frontend-test-task.herokuapp.com/winners");case 2:n=e.sent,t((a=n.data,{type:X,winners:a}));case 4:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()}})(_e),we=Object(o.b)((function(e){return{blocksNum:e.appReducer.mainReducer.fieldBlocksNum,delay:e.appReducer.mainReducer.delay,user:e.appReducer.userReducer,pc:e.appReducer.pcReducer}}))((function(e){var t=e.blocksNum,n=e.delay,a=e.user,i=e.pc;return r.a.createElement("div",{className:me.a.mainContainer},r.a.createElement("section",{className:me.a.gameSection},r.a.createElement(ie,null),(a.isWinner||i.isWinner)&&r.a.createElement(ve,null),t>0&&n>0&&r.a.createElement(le,null)),r.a.createElement("section",{className:me.a.leadersSection},r.a.createElement(Re,null)))})),je=(n(126),n(21)),Ne=n(81),Ce=n(41),Be=n(20),Ae=n(78),Se=n.n(Ae),Ge={fieldBlocksNum:0,delay:0,isGameOn:!0},We={name:"",points:0,isWinner:!1},xe={name:"Computer",points:0,isWinner:!1},Me=Object(je.combineReducers)({mainReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(Be.a)({},e,{fieldBlocksNum:t.mode*t.mode});case F:return Object(Be.a)({},e,{delay:t.delay});case q:return Object(Be.a)({},e,{isGameOn:!1});default:return e}},blocksReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.find((function(e){return e.id===t.id}));switch(t.type){case I:return t.arr;case U:return n.bgColor="rgb(0, 102, 255)",Object.assign([],e,Object(Ce.a)({},t.id,n));case H:return n.bgColor="rgb(255, 26, 26)",Object.assign([],e,Object(Ce.a)({},t.id,n));case J:return n.bgColor="rgb(0, 204, 0)",Object.assign([],e,Object(Ce.a)({},t.id,n));default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(Be.a)({},e,{name:t.name});case K:return Object(Be.a)({},e,{points:e.points+1});case Q:return Object(Be.a)({},e,{isWinner:!0});default:return e}},pcReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(Be.a)({},e,{points:e.points+1});case V:return Object(Be.a)({},e,{isWinner:!0});default:return e}}}),Te=n(79),De=n(80),Pe=Object(je.combineReducers)({appReducer:function(e,t){return t.type===z&&(e=void 0),Me(e,t)},leaderBoardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return t.winners.reverse();case Z:return[Object(Be.a)({},t.winnerObj,{id:Se()()})].concat(Object(Ne.a)(e));default:return e}}}),Fe=[De.a],Le=Object(Te.composeWithDevTools)(je.applyMiddleware.apply(void 0,Fe)),Ie=Object(je.createStore)(Pe,Le);c.a.render(r.a.createElement(o.a,{store:Ie},r.a.createElement(we,null)),document.getElementById("root"))},54:function(e,t,n){e.exports={mainContainer:"App_mainContainer__1_6lC",gameSection:"App_gameSection__1udFC",leadersSection:"App_leadersSection__3f2R9"}},55:function(e,t,n){e.exports={winnersList:"LeaderBoard_winnersList__66yOD",winnersHdr:"LeaderBoard_winnersHdr__1YHvW",noWinners:"LeaderBoard_noWinners__62NRt"}},57:function(e,t,n){e.exports={submitForm:"submitForm_submitForm__1OgQV",error:"submitForm_error__38GQG"}},58:function(e,t,n){e.exports={fieldContainer:"GameField_fieldContainer__1O0ag",fieldBlock:"GameField_fieldBlock__V4NfP"}},76:function(e,t,n){e.exports={enter:"animation_enter__1Bv-j",enterActive:"animation_enterActive__1KfhM",exit:"animation_exit__17wac",exitActive:"animation_exitActive__1Tp5S"}},77:function(e,t,n){e.exports={winnerContainer:"WinnerMsg_winnerContainer__3hM47"}},96:function(e,t,n){e.exports=n(135)}},[[96,1,2]]]);
//# sourceMappingURL=main.661f7eb3.chunk.js.map